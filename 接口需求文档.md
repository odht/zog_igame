## 概要
* 东西南北玩家用大写首字母表示

* 表示一张牌 花色在前，数字在后， 红桃2 就是 "H2"
1. id ： 表示消息的id ,依次递增，每次发送请求时，都会携带参数message_id表示上次消息的id,得到id大于message_id的消息
2. table_id：桌子编号 
3. uid：null表示公共消息，否则私人消息
4. board_id 当前副牌的编号
5. data 

| id    | table_id  | uid    |   board_id  |   data  |
| :----: |:--------:| :-----:| :-------:|:-------:|:--------:|
| 1   | 2 |  null  |    12|  allData
| 2   | 2 |  null  |    12|  allData
| 3   | 2 |  null  |    12|  allData
| 4   | 2 |  null  |    12|  allData
| 5   | 2 |  null  |    12|  allData

## 详细接口
1. 进入游戏房间得到 四个人共有的信道 牌的编号数组 ，私人信道，玩家信息
```
fetch(url)

```
返回值
```
{   table_id: 2, 
    public_channel_id: int,  // 四个人共有的信道
    board_id_list:[12,13,14,15,16...],//牌的编号数组
    board_id:12,   //当前牌的编号
    private_channel_id: int,// 私人信道
    players:{
        E:{name:'宏鸿',rank:"大师",seat:"E"}
        S:{name:'宏鸿1',rank:"大师",seat:"S"}
        W:{name:'宏鸿2',rank:"大师",seat:"W"}
        N:{name:'宏鸿3',rank:"大师",seat:"N"}
    }

}
```
## 建立长连接
fetch(url,this.sucPolling,this.failPolling,pollingId)
async sucPolling=(data)=>{
            pollingId = data.pollingId
            //聊天消息
           if(data.type==='msg'){
               聊天消息处理代码
               Models.polling(this.sucPolling,this.failPolling,pollingId)
           }else{
               //打牌信息，重新发送请求
            const data =  await  fetch(url,{
                    table_id : 2 ,
                    board_id: 12 ,
                    message_id ：100  // 初始值是0
                })
                处理打牌数据data
                Models.polling(this.sucPolling,this.failPolling,pollingId)
           }
        }
2. 发送准备请求
牌号是12，东玩家发送准备请求

```
fetch(url,{
    channel_id：public_channel_id,   //作用： 通知在3信道的其他玩家，发出了一个动作
    table_id：2 ,  // 表明哪一桌
    board_id: 12 ,  //这是编号12的牌
    action:"ready",  // 动作类型：准备
    player:'E',     // 发出动作的玩家，
    type: 'game'   // 表明是游戏消息，不是聊天消息
})
```
这时，通过长轮询知道有人做出了动作 再单独请求消息
```
fetch(url,{
    table_id : 2 ,
    board_id: 12 ,
    message_id ：100  // 初始值是0
})
```
返回值： table_id是2   ,  board_id: 12 , uid:null || 自己的uid  并且message_id> 100 的内容，data的具体内容
```
AllData
```
3. 叫牌： 根据 dealer进行叫牌
fetch(url,{
    channel_id:public_channel_id,
    table_id: 2
    board_id:12,
    action:"auction"
    player:'E',
    card:"S2",
})


4. 打牌 contract：'H6',说明叫牌完成 ，根据openlead的值，开始打牌
```
fetch(url,{
    channel_id: public_channel_id  ,  //通知在3信道的其他玩家，发出了一个动作
    table_id : 2      // 桌号 2
    board_id:12,      // 第12副牌
    player:'E',       //东玩家  
    action:"play",
    card:"S8",         //黑桃 8  
})
```

5. 摊牌
fetch(url,{
    channel_id:public_channel_id,
    table_id: 2
    board_id:12,
    action:askClaim
    player:'E', //东家摊牌
    claimNumber: 5,//可以赢5墩
})

6. 同意 拒绝摊牌
fetch(url,{
    channel_id:public_channel_id,
    table_id:2,
    board_id:12,
    action:"answerClaim"
    seat:'S', //南家接受摊牌
    answerClaim: true,
})

```
AllData:{
        type:"game", 表示这条消息是打牌消息，不是聊天消息  
        state:"play",// 表示当前的游戏状态：ready准备阶段、auction叫牌阶段 、play打牌阶段、claim摊牌阶段
        contract:"2S", 
        scoring: "IMP",//计分方式  
        board_id:13,  //当前牌的id,每一副牌的id不同
        vulnerable :"None" ,表示局况  EW  SN  Both
        ready:{ E: 1,S: 1,W: 0, N: 0 } // 准备状态，1表示已准备， 
        dealer ："N"  //第一个叫牌的人
        //手中的牌只能是自己和明手的牌
        hands:{
            E : ['SK', 'SQ', 'ST', 'S2', 'HA', 'HT',]  //玩家自己的牌
            S : ['SK', 'SQ', 'ST', 'S2', 'HA', 'HT',]  //明手的牌
            W : ['X', 'X', 'X', 'X', 'X', 'X',]
            N : ['X', 'X, 'X', 'X', 'X', 'X',]
        }
        //叫牌相关
        auction: {
            first: 'N',    //第一个叫牌的人
            call: [
                ['H2','Pass','X','H3'],   //叫牌过程
                ['Pass','Pass','Pass']
            ],
            note: ["note1", "note2"]
        },
        declarer:"E" ,//庄家
        dummy:"W",    //明手
        ew_win:1,     //东西方向赢一墩
        ns_win:0,     //
        
        current_trick:{     //桌面上正在出的牌
            "S"："DT",
            "W", "DQ",
        },            
        last_trick:{     //上一墩的打牌记录
            "S"："DT",
            "W", "DQ",
            "N", "D8",
            "E", "D3"
        }

        nextPlayer:"W",   //该谁执行动作
        claim:{
            claimer: 'S' , //发起摊牌请求的玩家
            number: 5, //表示能赢5墩
            agreed:["E"], // 表示东玩家同意摊牌，当数组中有两个元素时，表示摊牌通过
        }
        result:{
            EW: 100,
            SN: -100
        },
        id:1000, //消息id
    }
```
7. 发送公共聊天消息
```
fetch(url,{
    channel_id:public_channel_id,
    table_id: 2
    board_id:12,
    player:'E', //东家摊牌
    msg:"你好"
})
```
8. 发送私有消息
```
fetch(url,{
    channel_id:private_channel_id,
    table_id: 2
    board_id:12,
    player:'E',
    msg:"你好"
})
```
